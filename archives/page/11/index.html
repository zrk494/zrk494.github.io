<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;zrk494.github.io&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Pisces&quot;,&quot;version&quot;:&quot;8.3.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;}}</script>
<meta name="description" content="包括专业课学习的相关笔记，以及其他">
<meta property="og:type" content="website">
<meta property="og:title" content="post">
<meta property="og:url" content="http://zrk494.github.io/archives/page/11/index.html">
<meta property="og:site_name" content="post">
<meta property="og:description" content="包括专业课学习的相关笔记，以及其他">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="zrk">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://zrk494.github.io/archives/page/11/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;archives&#x2F;page&#x2F;11&#x2F;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>post</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">post</h1>
      <i class="logo-line"></i>
    </a>
      <img class="custom-logo-image" src="/uploads/233.jpg" alt="post">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zrk</p>
  <div class="site-description" itemprop="description">包括专业课学习的相关笔记，以及其他</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/yourname" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://plus.google.com/yourname" title="Google → https:&#x2F;&#x2F;plus.google.com&#x2F;yourname" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>Google</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://zrk494.github.io/2021/06/07/operating%20system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zrk">
      <meta itemprop="description" content="包括专业课学习的相关笔记，以及其他">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="post">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/06/07/operating%20system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5/" class="post-title-link" itemprop="url">操作系统---内存管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-06-07 21:57:11" itemprop="dateCreated datePublished" datetime="2021-06-07T21:57:11+08:00">2021-06-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-10-27 16:44:11" itemprop="dateModified" datetime="2022-10-27T16:44:11+08:00">2022-10-27</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h3><h4 id="内存管理概述"><a href="#内存管理概述" class="headerlink" title="内存管理概述"></a>内存管理概述</h4><ul>
<li>4大功能</li>
</ul>
<h5 id="1-内存空间的分配与回收"><a href="#1-内存空间的分配与回收" class="headerlink" title="1. 内存空间的分配与回收"></a>1. 内存空间的分配与回收</h5><ul>
<li>是最重要的功能（大概），后面细说</li>
<li>主要包括连续分配方式+非连续分配方式</li>
</ul>
<h5 id="2-从逻辑上扩充内存空间"><a href="#2-从逻辑上扩充内存空间" class="headerlink" title="2. 从逻辑上扩充内存空间"></a>2. 从逻辑上扩充内存空间</h5><ul>
<li>实现操作系统的虚拟性</li>
<li>包括覆盖技术+交换技术+<strong>虚拟存储技术</strong>（最重要）</li>
</ul>
<h5 id="3-实现地址转换（逻辑地址到物理地址）"><a href="#3-实现地址转换（逻辑地址到物理地址）" class="headerlink" title="3. 实现地址转换（逻辑地址到物理地址）"></a>3. 实现地址转换（逻辑地址到物理地址）</h5><ul>
<li>根据逻辑地址到物理地址的映射关系，将指令和数据的地址绑定到存储器的地址上</li>
<li>物理地址：在内存之中的实际地址（一个编号）</li>
<li><p>逻辑地址：将用户程序编译后的目标代码的首地址指定为0，之后的指令的地址都相对于进程首地址的地址</p>
</li>
<li><p>三种装入方式实现地址转换</p>
<ol>
<li>绝对装入：由编译器产生绝对地址</li>
<li>可重定位装入：装入程序负责地址转换</li>
<li>动态运行装入：运行时才进行地址转换（现代操作系统）</li>
</ol>
</li>
<li><p>三种链接方式</p>
<ol>
<li>静态链接</li>
<li>装入时动态链接</li>
<li>运行时动态链接</li>
</ol>
</li>
</ul>
<h5 id="4-内存保护"><a href="#4-内存保护" class="headerlink" title="4. 内存保护"></a>4. 内存保护</h5><ul>
<li><p>保证各个进程在自己的内存空间之中运行，不会越界访问</p>
</li>
<li><p>两种方式</p>
<ol>
<li><p>设置上下限寄存器</p>
</li>
<li><p>借助两种寄存器确定地址范围</p>
<ul>
<li>基地址寄存器（重定位寄存器），包含最小的合法物理内存地址，即可访问部分的起始地址</li>
<li>界地址寄存器（限长寄存器），包含可访问的地址范围大小</li>
<li>上述两个寄存器规定了一个进程的可访问地址范围（存储的是物理地址）</li>
</ul>
</li>
</ol>
</li>
</ul>
<h4 id="覆盖和交换"><a href="#覆盖和交换" class="headerlink" title="覆盖和交换"></a>覆盖和交换</h4><ul>
<li>这两种技术主要完成内存空间扩充的功能（这部分非考纲）</li>
</ul>
<h5 id="覆盖技术"><a href="#覆盖技术" class="headerlink" title="覆盖技术"></a>覆盖技术</h5><ul>
<li>将程序分段，常用的<strong>常驻</strong>内存，其他的按需求调入内存</li>
<li>常驻内存的部分位于内存的<strong>固定区（1个）</strong>，其他的位于<strong>覆盖区（若干个）</strong></li>
<li>缺点：必须程序员声明覆盖结构，对用户不透明，增加用户编程辅导</li>
<li>覆盖是同一程序之内的</li>
</ul>
<h5 id="交换技术"><a href="#交换技术" class="headerlink" title="交换技术"></a>交换技术</h5><ul>
<li>内存紧张的时候，存储系统将某些进程调出内存（到外存），仅<strong>保留PCB</strong></li>
<li>磁盘空间存在文件区和对换区域两部分</li>
<li>交换是不同进程之间的</li>
</ul>
<h4 id="内存分配-连续分配"><a href="#内存分配-连续分配" class="headerlink" title="内存分配-连续分配"></a>内存分配-连续分配</h4><ul>
<li>此种分配方式分配的内存是连续的（主要有三种）</li>
</ul>
<h5 id="1-单一连续分配"><a href="#1-单一连续分配" class="headerlink" title="1.单一连续分配"></a>1.单一连续分配</h5><ul>
<li><p>将内存划分成系统区和用户区，用户程序在用户区，只有一道用户程序</p>
</li>
<li><p>存在的问题：会产生内部碎片（不会产生外部碎片），存储器利用率极低</p>
</li>
</ul>
<h5 id="2-固定分区分配"><a href="#2-固定分区分配" class="headerlink" title="2.固定分区分配"></a>2.固定分区分配</h5><ul>
<li>将用户空间分成若干个<strong>固定大小</strong>的分区，每个分区只有装入一个作业</li>
<li>2种划分分区的方式<ul>
<li>分区大小相同</li>
<li>分区大小不同</li>
</ul>
</li>
<li>存在的问题：会产生内部碎片（不会产生外部碎片）</li>
<li>记录分区信息的方式：建立分区说明表这个数据结构存储对应分区信息</li>
</ul>
<h5 id="3-可变分区分配（动态分区分配）"><a href="#3-可变分区分配（动态分区分配）" class="headerlink" title="3.可变分区分配（动态分区分配）"></a>3.可变分区分配（动态分区分配）</h5><ul>
<li>将资源信息直接按一定规则，根据进程的大小动态地建立分区<ul>
<li>用空闲分区表或者空闲分区链这样的数据结构记录内存使用情况（记录的是分区信息，一般包括分区号，起始地址，分区大小等）</li>
<li>通过动态分区分配算法完成从多个空间充足的分区选择一个来装入作业</li>
<li>修改空闲分区表完成分区的分配与回收（进程结束导致出现<strong>相邻的</strong>内存空闲区域，我们会将<strong>相邻</strong>的区域进行<strong>合并</strong>）</li>
</ul>
</li>
<li>无内部碎片，但可能有外部碎片</li>
<li>一些概念<ul>
<li>内部碎片：分配给进程的内存中有些部分没用上</li>
<li>外部碎片：内存中剩余的空闲分区太小，无法利用（即存在的分区没有比进程需要的空间更大的）<ul>
<li>可以通过紧凑技术解决</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="分页分配"><a href="#分页分配" class="headerlink" title="分页分配"></a>分页分配</h4><ul>
<li>是一种非连续的分配管理方式</li>
</ul>
<h5 id="概念补充："><a href="#概念补充：" class="headerlink" title="概念补充："></a>概念补充：</h5><ul>
<li><p>页帧（页框，内存块，物理块，物理页面）：把物理内存划分为固定大小的块，页帧号从0开始</p>
</li>
<li><p>页（页面）：把进程的逻辑地址空间划分为固定大小的块（与页框大小相等），页号从0开始</p>
</li>
<li><p>帧和页存在一一对应的关系，给进程分配内存是以页为单位的。</p>
</li>
<li><p>页表：记录了逻辑地址到物理地址（页面到页框的映射关系）的映射关系（页表通常存放在PCB中）</p>
</li>
<li>每个进程对应一张页表<ul>
<li>每个页表项包括页号和块号（每个表项等长）</li>
</ul>
</li>
<li>块号占用的存储空间根据内存块的数量得出来<ul>
<li>页号是从0开始连续存放，可理解为数组下标号，不占用存储空间</li>
</ul>
</li>
</ul>
<h5 id="分页之后的地址转换"><a href="#分页之后的地址转换" class="headerlink" title="分页之后的地址转换"></a>分页之后的地址转换</h5><ul>
<li>根据进程在内存中存放的特点（各个页面是离散的，页面内部是连续的）得到这样的转换方式：<ul>
<li>访问某个逻辑地址A所对应的<strong>页号</strong></li>
<li>根据页号查页表，确定<strong>块号</strong>（即在内存中的起始地址）</li>
<li>根据<strong>页内偏移量</strong>确定A所对应的物理地址</li>
</ul>
</li>
<li>页号的计算方式（手算）：逻辑地址/页面长度（取整）</li>
<li>页内偏移量：逻辑地址%页面长度</li>
</ul>
<ul>
<li>逻辑地址的结构：页号+页内偏移量</li>
<li>注：页面大小和<strong>页内偏移量位数</strong>的关系</li>
<li>注2：物理地址=页面起始地址+页内偏移量</li>
<li>注3：分析一下页面大小为2的情况</li>
<li>注4（页号合法性检查）：在实现这个地址转换的过程时，系统会判断页号是否越界（越界就会发生越界中断）</li>
<li>页表寄存器：存放页表起始地址+存放页表长度</li>
</ul>
<h5 id="具有快表的地址变换"><a href="#具有快表的地址变换" class="headerlink" title="具有快表的地址变换"></a>具有快表的地址变换</h5><ul>
<li>是基础地址变换的一种改进</li>
<li><p>快表（联想寄存器，TLB），是一种高速缓存（存放最近访问的页表的副本），不是内存</p>
</li>
<li><p>慢表：内存中的页表项</p>
</li>
<li><p>变换过程：总体的思路类似于Cache，就是先访问TLB，找不到再访问内存</p>
</li>
<li><p>与Cache的主要区别在于存储的数据不一样，普通的Cache会存放各种数据，而TLB只存页表项</p>
</li>
</ul>
<h5 id="两级页表"><a href="#两级页表" class="headerlink" title="两级页表"></a>两级页表</h5><ul>
<li>主要用于解决之前单级页表的问题<ul>
<li>问题1：页表是连续存放的，当页表很大时，需要占用很多个连续的页框</li>
<li>问题2：没必要让整个页表常驻内存（进程一段时间内可能只访问某几个页面）</li>
</ul>
</li>
<li>页目录表：将太长的页表分组后（一般和一个分组一样大），用这个表来记录这个离散分配的页表</li>
</ul>
<h4 id="分段分配"><a href="#分段分配" class="headerlink" title="分段分配"></a>分段分配</h4><ul>
<li>是一种非连续的分配方式</li>
<li>将程序看成由多个逻辑段组成，将逻辑地址分成两部分：分段号+偏移，引入段表（段表有两个条目：段基地址+段界限）</li>
</ul>
<h4 id="虚拟内存"><a href="#虚拟内存" class="headerlink" title="虚拟内存"></a>虚拟内存</h4><h5 id="传统模式的问题"><a href="#传统模式的问题" class="headerlink" title="传统模式的问题"></a>传统模式的问题</h5><ul>
<li>一次性：作业必须一次性装入内存才可以运行，作业太大则无法运行，作业太多则只有少部分作业能运行</li>
<li>驻留性：作业装入内存就会一直驻留是，会占用资源</li>
</ul>
<h5 id="局部性原理"><a href="#局部性原理" class="headerlink" title="局部性原理"></a>局部性原理</h5><ul>
<li>时间局部性</li>
<li>空间局部性</li>
</ul>
<h5 id="虚拟内存概述"><a href="#虚拟内存概述" class="headerlink" title="虚拟内存概述"></a>虚拟内存概述</h5><ul>
<li>基于局部性原理，在程序<strong>装入时</strong>，将即将用到的部分装入内存，暂时用不到的留在外存/程序<strong>执行</strong>过程中，将其需要的某些信息从外存调入内存/<strong>内存空间不够</strong>，会将用不到的信息调出到外存</li>
<li>3个特征<ol>
<li>多次性：作业运行时不需要一次性全部装入内存</li>
<li>对换性：作业运行时运行将其换入、换出</li>
<li>虚拟性：逻辑上扩充了容量</li>
</ol>
</li>
</ul>
<h5 id="实现的方式概述"><a href="#实现的方式概述" class="headerlink" title="实现的方式概述"></a>实现的方式概述</h5><ul>
<li>基于离散分配的内存管理方式</li>
<li>页面置换功能和请求调页功能</li>
</ul>
<h5 id="请求分页管理方式"><a href="#请求分页管理方式" class="headerlink" title="请求分页管理方式"></a>请求分页管理方式</h5><ul>
<li><p>基本方式类似基本分页存储管理，主要区别在于请求分页管理方式多了一些内容实现虚拟内存技术</p>
</li>
<li><p>页表机制</p>
<ul>
<li>包括5个部分</li>
</ul>
<ol>
<li><p>内存块号</p>
</li>
<li><p>状态位：表示是否调入内存</p>
</li>
<li><p>访问字段（访问位）：记录该页面最近被访问了几次（或者上次访问的时间）</p>
</li>
<li>修改位：是否被修改过（<strong>只有写指令才会导致其变化</strong>）</li>
<li>外存地址</li>
</ol>
</li>
<li><p>缺页中断机制：当访问的页面不存在内存是，会产生缺页中断</p>
<ul>
<li>操作系统的缺页中断处理程序会处理中断</li>
<li>具体过程：<ol>
<li>此时，<strong>先阻塞</strong>缺页的进程，将其放到<strong>阻塞队列</strong>，等调页完成后再将其唤醒，<strong>放回就绪队列</strong>等待</li>
<li>有空闲块，则为该进程分配一个空闲块，然后装入即可</li>
<li>没有空闲块，则通过页面置换算法选择一个页面淘汰（如果淘汰的页面被修改过，则要将其写会内存）</li>
</ol>
</li>
<li>这个机制属于<strong>内中断</strong></li>
<li>一条指令可能会产生两次<strong>缺页中断</strong></li>
</ul>
</li>
<li>地址变换机构（如何进行地址变换）</li>
</ul>
<h5 id="页面置换算法-times-5"><a href="#页面置换算法-times-5" class="headerlink" title="页面置换算法$\times$5"></a>页面置换算法$\times$5</h5><ul>
<li><p>页面置换需要磁盘I/O，会有较大的开销，因此算法的目标是追求<strong>更少的缺页率</strong></p>
</li>
<li><p>最佳置换算法（OPT）：每次选择淘汰的页面是以后<strong>永不使用</strong>的（或者最长时间不使用的）</p>
<ul>
<li>注：缺页未必发生页面置换</li>
<li>缺页率=缺页中断/访问页面次数</li>
<li>缺点：实际上无法实现，因为操作系统无法预判页面访问的序列</li>
</ul>
</li>
<li><p>先进先出置换算法（FIFO）：每次淘汰的页面是<strong>最早进入</strong>内存的页面</p>
<ul>
<li>实现方法：调入内存的页面按调入的先后顺序得到一个队列，需要换出的放队头即可</li>
<li>缺点：<ul>
<li>导致Belady异常（分配的内存块增多，缺页次数却增加的情况）</li>
<li>虽然实现简单，但算法性能差</li>
</ul>
</li>
</ul>
</li>
<li><p>最近最久未使用置换算法（LRU）：每次淘汰最近最久未使用的页面</p>
<ul>
<li>实现方法：每个页表项中的访问字段设置为<strong>上次被访问所经历的时间</strong>t</li>
<li>手算可以逆向扫描，找到最后出现的页号即可</li>
<li>缺点：实现需要硬件支持，比较困难且开销大</li>
</ul>
</li>
<li><p>时钟置换算法（最近未用算法CLOCK）</p>
<ul>
<li><p>简单时钟算法</p>
<ul>
<li>实现：访问字段用来标识是否被访问过，内存中的页面用循环队列存储，淘汰时检查队列中页面的访问字段（当前位置开始），为0则换出，为1则设为0并检查下一个（如果所有页面的访问字段为1，则会扫描第二轮）</li>
</ul>
</li>
<li><p>改进时钟算法</p>
<ul>
<li><p>改进思路：实际上只有被淘汰的页面被修改过，才需要写回外存，所以当其他条件相同时优先淘汰没有修改过的页面</p>
</li>
<li><p>具体实现：用二元组（访问位，修改位）表示状态，且内存中的页面用循环队列存储，淘汰时开始扫描</p>
<p>第一轮：从<strong>当前位置</strong>开始扫描，找到(0,0)淘汰，不改变任何标志位</p>
<p>第二轮：扫描查找（0,1）淘汰，扫描过程将访问位置0</p>
<p>第三轮：扫描查找（0,0）淘汰，不改变任何标志位</p>
<p>第四轮：扫描查找（0,1）淘汰</p>
</li>
<li><p>注：实现过程中，一轮如果扫描不到预期结果才进行下一轮</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="页面分配策略"><a href="#页面分配策略" class="headerlink" title="页面分配策略"></a>页面分配策略</h5><ul>
<li><p>驻留集：给进程分配的物理块的集合</p>
<ul>
<li>一般小于进程总大小</li>
<li>太小就缺页频繁，太大导致多道程序并发度下降资源利用率降低</li>
<li>分配方式：固定分配和可变分配</li>
<li>置换策略：局部置换（缺页只能置换进程自己的物理块）和全局置换（可以占用操作系统空闲的，也可以占其他进程的）</li>
</ul>
</li>
<li><p>固定分配+局部置换（）</p>
</li>
<li>可变分配+全局置换（缺页就分配新的物理块）</li>
<li><p>可变分配+局部置换（根据缺页频率<strong>动态调整</strong>物理块的分配）</p>
</li>
<li><p>调入页面的时机</p>
<ul>
<li>预调页策略：主要是由程序员指出哪些部分先调入（进程首次调入时使用）</li>
<li>请求调页策略：进程运行期间调入，一次只能调<strong>一个</strong>，I/O开销较大</li>
</ul>
</li>
<li>从哪里调入页面<ul>
<li>一般先从文件区到对换区（外存内部），再调入内存</li>
<li>如果对换区空间不够，则从文件区调入<strong>不会修改的</strong>数据（不必写磁盘）</li>
<li>内存调出的目的地总是对换区，之后还可能从对换区到文件区</li>
</ul>
</li>
<li>抖动（颠簸）现象：页面短时间内频繁的换入换出<ul>
<li>导致的原因是：进程频繁访问的页面数高于其分配到的物理块</li>
<li>引入工作集（某段时间内，进程实际访问的页面集合）解决，保证驻留集大小不小于工作集</li>
</ul>
</li>
</ul>
<h5 id="内存映射文件"><a href="#内存映射文件" class="headerlink" title="内存映射文件"></a>内存映射文件</h5><ul>
<li></li>
<li>多个进程可以映射同一个文件，实现共享</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/archives/page/10/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/archives/">1</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/archives/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/archives/page/42/">42</a><a class="extend next" rel="next" href="/archives/page/12/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zrk</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{&quot;enable&quot;:true,&quot;per_page&quot;:true,&quot;cdn&quot;:&quot;&#x2F;&#x2F;cdn.bootcss.com&#x2F;mathjax&#x2F;2.7.1&#x2F;latest.js?config&#x3D;TeX-AMS-MML_HTMLorMML&quot;,&quot;tags&quot;:&quot;none&quot;,&quot;js&quot;:&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;mathjax@3.1.2&#x2F;es5&#x2F;tex-mml-chtml.js&quot;}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
